{"version":3,"file":"index.umd.js","sources":["../src/hooks/use-debug.js","../src/hooks/use-isomorphic-layout-effect.js","../src/misc/util.js","../src/hooks/use-document-ready-state.js","../src/hooks/use-event-bus.js","../src/hooks/use-rect.js","../src/hooks/use-frame.js","../src/hooks/use-id.js","../src/hooks/use-interval.js","../src/hooks/use-is-touch-device.js","../src/hooks/use-is-visible.js","../src/hooks/use-media-query.js","../src/hooks/use-click-outside-event.js","../src/hooks/use-slots.js"],"sourcesContent":["import { useMemo } from 'react'\n\nexport const useDebug = () => {\n  const debug = useMemo(\n    () =>\n      typeof window !== 'undefined'\n        ? window.location.href.includes('#debug') ||\n          process.env.NODE_ENV === 'development'\n        : false,\n    []\n  )\n  return debug\n}\n\nexport default useDebug\n","import { useEffect, useLayoutEffect as vanillaUseLayoutEffect } from 'react'\nimport { isBrowser } from '../misc/util'\n\nexport const useLayoutEffect = isBrowser ? vanillaUseLayoutEffect : useEffect\n\nexport default useLayoutEffect\n","export const isBrowser = typeof window !== 'undefined'\n\nexport const noop = () => {}\n\nexport const on = (obj, ...args) => {\n  if (obj && obj.addEventListener) {\n    obj.addEventListener(...args)\n  }\n}\n\nexport const off = (obj, ...args) => {\n  if (obj && obj.removeEventListener) {\n    obj.removeEventListener(...args)\n  }\n}\n","import { useState } from 'react'\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\n\nfunction _useDocumentReadyState() {\n  const [readyState, setReadyState] = useState(document.readyState)\n\n  useLayoutEffect(() => {\n    setReadyState(document.readyState)\n\n    function onStateChange() {\n      setReadyState(document.readyState)\n    }\n\n    document.addEventListener('readystatechange', onStateChange, false)\n\n    return () =>\n      document.removeEventListener('readystatechange', onStateChange, false)\n  }, [])\n\n  return readyState\n}\n\nexport const useDocumentReadyState =\n  typeof window !== 'undefined' ? _useDocumentReadyState : () => undefined\n\nexport default useDocumentReadyState\n","import { useEffect } from 'react'\n\nlet subscribers = []\n\nconst subscribe = (filter, callbackFn) => {\n  if (filter === undefined || filter === null) return undefined\n  if (callbackFn === undefined || callbackFn === null) return undefined\n\n  subscribers = [...subscribers, [filter, callbackFn]]\n\n  return () => {\n    subscribers = subscribers.filter(\n      (subscriber) => subscriber[1] !== callbackFn\n    )\n  }\n}\n\nexport const dispatch = (event) => {\n  let { type } = event\n  if (typeof event === 'string') type = event\n\n  const args = []\n  if (typeof event === 'string') args.push({ type })\n  else args.push(event)\n\n  subscribers.forEach(([filter, callbackFn]) => {\n    if (typeof filter === 'string' && filter !== type) return\n    if (typeof filter === 'function' && !filter(...args)) return\n    callbackFn(...args)\n  })\n}\n\nexport const useEventBus = (type, callback, deps = []) => {\n  /* eslint-disable */\n  useEffect(() => subscribe(type, callback), [...deps, callback, type])\n  /* eslint-enable */\n\n  return dispatch\n}\n\nexport default useEventBus\n","import { useRef, useState } from 'react'\nimport { throttle } from 'throttle-debounce'\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\n\nexport function offsetTop(element, accumulator = 0) {\n  const top = accumulator + element.offsetTop\n  if (element.offsetParent) {\n    return offsetTop(element.offsetParent, top)\n  }\n  return top\n}\n\nexport function offsetLeft(element, accumulator = 0) {\n  const left = accumulator + element.offsetLeft\n  if (element.offsetParent) {\n    return offsetLeft(element.offsetParent, left)\n  }\n  return left\n}\n\nexport default function useRect({ debounce = 1000 } = {}) {\n  const element = useRef()\n\n  const [rect, setRect] = useState({\n    top: undefined,\n    left: undefined,\n    width: undefined,\n    height: undefined,\n  })\n\n  const resize = () => {\n    if (element.current) {\n      setRect((prev) => ({\n        ...prev,\n        top: offsetTop(element.current),\n        left: offsetLeft(element.current),\n      }))\n    }\n  }\n\n  // resize if body height changes\n  useLayoutEffect(() => {\n    const callback = throttle(debounce, resize)\n    const resizeObserver = new ResizeObserver(callback)\n    resizeObserver.observe(document.body)\n\n    return () => {\n      resizeObserver.disconnect()\n      callback.cancel({ upcomingOnly: true })\n    }\n  }, [debounce])\n\n  const onResizeObserver = ([entry]) => {\n    const { width, height } = entry.contentRect\n\n    setRect((prev) => ({\n      ...prev,\n      width,\n      height,\n    }))\n  }\n\n  const resizeObserver = useRef()\n\n  const setRef = (node) => {\n    if (!node || node === element.current) return\n\n    resizeObserver.current?.disconnect()\n    resizeObserver.current = new ResizeObserver(onResizeObserver)\n\n    resizeObserver.current.observe(node)\n\n    element.current = node\n  }\n\n  const getRect = (x = 0, y = 0) => {\n    return rect\n  }\n\n  return [setRef, rect, getRect]\n}\n","import { raf } from '@studio-freight/tempus'\nimport { useEffect } from 'react'\n\nexport function useFrame(callback, priority = 0) {\n  useEffect(() => {\n    if (callback) {\n      const id = raf.add(callback, priority)\n\n      return () => {\n        raf.remove(id)\n      }\n    }\n  }, [callback, priority])\n}\n\nexport default useFrame\n","import { nanoid } from 'nanoid'\nimport { useMemo } from 'react'\n\nexport function useId() {\n  const id = useMemo(() => nanoid(), [])\n\n  return id\n}\n\nexport default useId","import { useEffect, useRef } from 'react'\n\nexport const useInterval = (callback, delay) => {\n  const savedCallback = useRef()\n\n  useEffect(() => {\n    savedCallback.current = callback\n  })\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current()\n    }\n    if (delay !== null) {\n      const id = setInterval(tick, delay)\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}\n\nexport default useInterval\n","import { useCallback, useState } from 'react'\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\n\nexport const useIsTouchDevice = () => {\n  const [isTouchDevice, setIsTouchDevice] = useState(undefined)\n\n  const onResize = useCallback(() => {\n    setIsTouchDevice(\n      'ontouchstart' in window ||\n        navigator.maxTouchPoints > 0 ||\n        navigator.msMaxTouchPoints > 0\n    )\n  }, [])\n\n  useLayoutEffect(() => {\n    onResize()\n    window.addEventListener('resize', onResize, false)\n\n    return () => {\n      window.removeEventListener('resize', onResize, false)\n    }\n  }, [])\n\n  return isTouchDevice\n}\n\nexport default useIsTouchDevice\n","import { useCallback, useEffect, useRef, useState } from 'react'\n\nexport const useIsVisible = ({\n  root = null,\n  rootMargin = '0px',\n  threshold = 1.0,\n  once = false,\n} = {}) => {\n  const observer = useRef()\n  const ref = useRef()\n  const [inView, setInView] = useState(false)\n\n  const setRef = (node) => {\n    if (!ref.current) {\n      ref.current = node\n    }\n  }\n\n  const callbackFunction = useCallback((entries) => {\n    const [entry] = entries\n    setInView(entry.isIntersecting)\n  }, [])\n\n  useEffect(() => {\n    observer.current = new IntersectionObserver(callbackFunction, {\n      root,\n      rootMargin,\n      threshold,\n    })\n    if (ref.current) observer.current.observe(ref.current)\n    return () => {\n      observer.current.disconnect()\n    }\n  }, [callbackFunction])\n\n  useEffect(() => {\n    if (once && inView) {\n      observer.current.disconnect()\n    }\n  }, [inView])\n\n  return { setRef, inView }\n}\n\nexport default useIsVisible\n","import { useCallback, useState } from 'react'\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\n\nexport const useMediaQuery = (queryString) => {\n  const [isMatch, setIsMatch] = useState(undefined)\n\n  const mqChange = useCallback((mq) => {\n    setIsMatch(mq.matches)\n  }, [])\n\n  useLayoutEffect(() => {\n    const mq = window.matchMedia(queryString)\n    mqChange(mq)\n\n    mq.addEventListener('change', mqChange)\n\n    return () => {\n      mq.removeEventListener('change', mqChange)\n    }\n  })\n\n  return isMatch\n}\n\nexport default useMediaQuery\n","import { useCallback, useEffect } from 'react'\n\nexport function useOutsideClickEvent(ref, callback) {\n  const handleClickOutside = useCallback(\n    (event) => {\n      if (ref.current && !ref.current.contains(event.target)) {\n        callback()\n      }\n    },\n    [ref, callback]\n  )\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [handleClickOutside])\n}\n\nexport default useOutsideClickEvent\n","// https://medium.com/swlh/bring-vue-named-slots-to-react-87684188f18e\n\nimport { useMemo } from 'react'\n\nexport const useSlots = (types = [], children = []) => {\n  const _children = useMemo(() => children && [children].flat(), [children])\n  const _types = useMemo(() => types && [types].flat(), [types])\n  const slots = useMemo(\n    () =>\n      _children &&\n      _types &&\n      _types.map(\n        // @ts-ignore\n        (type) => _children.find((el) => el.type === type)?.props.children\n      ),\n    [_children, _types]\n  )\n\n  return types[0] ? slots : slots[0]\n}\n\nexport default useSlots\n"],"names":["useLayoutEffect","vanillaUseLayoutEffect","useEffect","useDocumentReadyState","window","useState","document","readyState","setReadyState","_useState","addEventListener","onStateChange","removeEventListener","subscribers","dispatch","event","type","args","push","forEach","_ref","filter","callbackFn","apply","offsetTop","element","accumulator","top","offsetParent","left","offsetLeft","useMemo","location","href","includes","process","env","NODE_ENV","callback","deps","concat","subscriber","useFrame","priority","id","raf","add","remove","useId","nanoid","delay","savedCallback","useRef","current","setInterval","undefined","isTouchDevice","setIsTouchDevice","useCallback","navigator","maxTouchPoints","msMaxTouchPoints","onResize","_temp","_ref$root","root","rootMargin","_ref$rootMargin","threshold","_ref$threshold","once","_ref$once","observer","inView","setInView","callbackFunction","entries","isIntersecting","IntersectionObserver","ref","observe","disconnect","setRef","node","queryString","isMatch","setIsMatch","mqChange","mq","matches","matchMedia","useOutsideClickEvent","handleClickOutside","contains","target","debounce","_ref$debounce","width","height","rect","setRect","resize","prev","_extends","throttle","resizeObserver","ResizeObserver","body","cancel","upcomingOnly","onResizeObserver","_ref2","contentRect","_resizeObserver$curre","x","y","types","children","_children","flat","_types","slots","map","_children$find","find","el","props"],"mappings":"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"}