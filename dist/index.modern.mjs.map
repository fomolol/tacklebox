{"version":3,"file":"index.modern.mjs","sources":["../src/hooks/use-click-outside-event.js","../src/hooks/use-debug.js","../src/hooks/use-isomorphic-layout-effect.js","../src/misc/util.js","../src/hooks/use-document-ready-state.js","../src/hooks/use-event-bus.js","../src/hooks/use-frame.js","../src/hooks/use-id.js","../src/hooks/use-interval.js","../src/hooks/use-is-touch-device.js","../src/hooks/use-is-visible.js","../src/hooks/use-media-query.js","../src/hooks/use-rect.js","../src/hooks/use-slots.js"],"sourcesContent":["import { useCallback, useEffect } from 'react'\n\nexport function useOutsideClickEvent(ref, callback) {\n  const handleClickOutside = useCallback(\n    (event) => {\n      if (ref.current && !ref.current.contains(event.target)) {\n        callback()\n      }\n    },\n    [ref, callback]\n  )\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [handleClickOutside])\n}\n\nexport default useOutsideClickEvent\n","import { useMemo } from 'react'\n\nexport const useDebug = () => {\n  const debug = useMemo(\n    () =>\n      typeof window !== 'undefined'\n        ? window.location.href.includes('#debug') ||\n          process.env.NODE_ENV === 'development'\n        : false,\n    []\n  )\n  return debug\n}\n\nexport default useDebug\n","import { useEffect, useLayoutEffect as vanillaUseLayoutEffect } from 'react'\nimport { isBrowser } from '../misc/util'\n\nexport const useLayoutEffect = isBrowser ? vanillaUseLayoutEffect : useEffect\n\nexport default useLayoutEffect\n","export const isBrowser = typeof window !== 'undefined'\n\nexport const noop = () => {}\n\nexport const on = (obj, ...args) => {\n  if (obj && obj.addEventListener) {\n    obj.addEventListener(...args)\n  }\n}\n\nexport const off = (obj, ...args) => {\n  if (obj && obj.removeEventListener) {\n    obj.removeEventListener(...args)\n  }\n}\n","import { useState } from 'react'\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\n\nfunction _useDocumentReadyState() {\n  const [readyState, setReadyState] = useState(document.readyState)\n\n  useLayoutEffect(() => {\n    setReadyState(document.readyState)\n\n    function onStateChange() {\n      setReadyState(document.readyState)\n    }\n\n    document.addEventListener('readystatechange', onStateChange, false)\n\n    return () =>\n      document.removeEventListener('readystatechange', onStateChange, false)\n  }, [])\n\n  return readyState\n}\n\nexport const useDocumentReadyState =\n  typeof window !== 'undefined' ? _useDocumentReadyState : () => undefined\n\nexport default useDocumentReadyState\n","import { useEffect } from 'react'\n\nlet subscribers = []\n\nconst subscribe = (filter, callbackFn) => {\n  if (filter === undefined || filter === null) return undefined\n  if (callbackFn === undefined || callbackFn === null) return undefined\n\n  subscribers = [...subscribers, [filter, callbackFn]]\n\n  return () => {\n    subscribers = subscribers.filter(\n      (subscriber) => subscriber[1] !== callbackFn\n    )\n  }\n}\n\nexport const dispatch = (event) => {\n  let { type } = event\n  if (typeof event === 'string') type = event\n\n  const args = []\n  if (typeof event === 'string') args.push({ type })\n  else args.push(event)\n\n  subscribers.forEach(([filter, callbackFn]) => {\n    if (typeof filter === 'string' && filter !== type) return\n    if (typeof filter === 'function' && !filter(...args)) return\n    callbackFn(...args)\n  })\n}\n\nexport const useEventBus = (type, callback, deps = []) => {\n  /* eslint-disable */\n  useEffect(() => subscribe(type, callback), [...deps, callback, type])\n  /* eslint-enable */\n\n  return dispatch\n}\n\nexport default useEventBus\n","import { raf } from '@studio-freight/tempus'\nimport { useEffect } from 'react'\n\nexport function useFrame(callback, priority = 0) {\n  useEffect(() => {\n    if (callback) {\n      const id = raf.add(callback, priority)\n\n      return () => {\n        raf.remove(id)\n      }\n    }\n  }, [callback, priority])\n}\n\nexport default useFrame\n","import { nanoid } from 'nanoid'\nimport { useMemo } from 'react'\n\nexport function useId() {\n  const id = useMemo(() => nanoid(), [])\n\n  return id\n}\n\nexport default useId","import { useEffect, useRef } from 'react'\n\nexport const useInterval = (callback, delay) => {\n  const savedCallback = useRef()\n\n  useEffect(() => {\n    savedCallback.current = callback\n  })\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current()\n    }\n    if (delay !== null) {\n      const id = setInterval(tick, delay)\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}\n\nexport default useInterval\n","import { useCallback, useState } from 'react'\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\n\nexport const useIsTouchDevice = () => {\n  const [isTouchDevice, setIsTouchDevice] = useState(undefined)\n\n  const onResize = useCallback(() => {\n    setIsTouchDevice(\n      'ontouchstart' in window ||\n        navigator.maxTouchPoints > 0 ||\n        navigator.msMaxTouchPoints > 0\n    )\n  }, [])\n\n  useLayoutEffect(() => {\n    onResize()\n    window.addEventListener('resize', onResize, false)\n\n    return () => {\n      window.removeEventListener('resize', onResize, false)\n    }\n  }, [])\n\n  return isTouchDevice\n}\n\nexport default useIsTouchDevice\n","import { useCallback, useEffect, useRef, useState } from 'react'\n\nexport const useIsVisible = ({\n  root = null,\n  rootMargin = '0px',\n  threshold = 1.0,\n  once = false,\n} = {}) => {\n  const observer = useRef()\n  const ref = useRef()\n  const [inView, setInView] = useState(false)\n\n  const setRef = (node) => {\n    if (!ref.current) {\n      ref.current = node\n    }\n  }\n\n  const callbackFunction = useCallback((entries) => {\n    const [entry] = entries\n    setInView(entry.isIntersecting)\n  }, [])\n\n  useEffect(() => {\n    observer.current = new IntersectionObserver(callbackFunction, {\n      root,\n      rootMargin,\n      threshold,\n    })\n    if (ref.current) observer.current.observe(ref.current)\n    return () => {\n      observer.current.disconnect()\n    }\n  }, [callbackFunction])\n\n  useEffect(() => {\n    if (once && inView) {\n      observer.current.disconnect()\n    }\n  }, [inView])\n\n  return { setRef, inView }\n}\n\nexport default useIsVisible\n","import { useCallback, useState } from 'react'\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\n\nexport const useMediaQuery = (queryString) => {\n  const [isMatch, setIsMatch] = useState(undefined)\n\n  const mqChange = useCallback((mq) => {\n    setIsMatch(mq.matches)\n  }, [])\n\n  useLayoutEffect(() => {\n    const mq = window.matchMedia(queryString)\n    mqChange(mq)\n\n    mq.addEventListener('change', mqChange)\n\n    return () => {\n      mq.removeEventListener('change', mqChange)\n    }\n  })\n\n  return isMatch\n}\n\nexport default useMediaQuery\n","import { useRef, useState } from 'react'\nimport { throttle } from 'throttle-debounce'\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\n\nexport function offsetTop(element, accumulator = 0) {\n  const top = accumulator + element.offsetTop\n  if (element.offsetParent) {\n    return offsetTop(element.offsetParent, top)\n  }\n  return top\n}\n\nexport function offsetLeft(element, accumulator = 0) {\n  const left = accumulator + element.offsetLeft\n  if (element.offsetParent) {\n    return offsetLeft(element.offsetParent, left)\n  }\n  return left\n}\n\nexport default function useRect({ debounce = 1000 } = {}) {\n  const element = useRef()\n\n  const [rect, setRect] = useState({\n    top: undefined,\n    left: undefined,\n    width: undefined,\n    height: undefined,\n  })\n\n  const resize = () => {\n    if (element.current) {\n      setRect((prev) => ({\n        ...prev,\n        top: offsetTop(element.current),\n        left: offsetLeft(element.current),\n      }))\n    }\n  }\n\n  // resize if body height changes\n  useLayoutEffect(() => {\n    const callback = throttle(debounce, resize)\n    const resizeObserver = new ResizeObserver(callback)\n    resizeObserver.observe(document.body)\n\n    return () => {\n      resizeObserver.disconnect()\n      callback.cancel({ upcomingOnly: true })\n    }\n  }, [debounce])\n\n  const onResizeObserver = ([entry]) => {\n    const { width, height } = entry.contentRect\n\n    setRect((prev) => ({\n      ...prev,\n      width,\n      height,\n    }))\n  }\n\n  const resizeObserver = useRef()\n\n  const setRef = (node) => {\n    if (!node || node === element.current) return\n\n    resizeObserver.current?.disconnect()\n    resizeObserver.current = new ResizeObserver(onResizeObserver)\n\n    resizeObserver.current.observe(node)\n\n    element.current = node\n  }\n\n  const getRect = (x = 0, y = 0) => {\n    return rect\n  }\n\n  return [setRef, rect, getRect]\n}\n","// https://medium.com/swlh/bring-vue-named-slots-to-react-87684188f18e\n\nimport { useMemo } from 'react'\n\nexport const useSlots = (types = [], children = []) => {\n  const _children = useMemo(() => children && [children].flat(), [children])\n  const _types = useMemo(() => types && [types].flat(), [types])\n  const slots = useMemo(\n    () =>\n      _children &&\n      _types &&\n      _types.map(\n        // @ts-ignore\n        (type) => _children.find((el) => el.type === type)?.props.children\n      ),\n    [_children, _types]\n  )\n\n  return types[0] ? slots : slots[0]\n}\n\nexport default useSlots\n"],"names":["useOutsideClickEvent","ref","callback","handleClickOutside","useCallback","event","current","contains","target","useEffect","document","addEventListener","removeEventListener","useDebug","useMemo","window","location","href","includes","process","env","NODE_ENV","useLayoutEffect","vanillaUseLayoutEffect","useDocumentReadyState","readyState","setReadyState","useState","onStateChange","undefined","subscribers","dispatch","type","args","push","forEach","filter","callbackFn","useEventBus","deps","subscriber","subscribe","useFrame","priority","id","raf","add","remove","useId","nanoid","useInterval","delay","savedCallback","useRef","setInterval","clearInterval","useIsTouchDevice","isTouchDevice","setIsTouchDevice","navigator","maxTouchPoints","msMaxTouchPoints","onResize","useIsVisible","root","rootMargin","threshold","once","observer","inView","setInView","entries","entry","isIntersecting","IntersectionObserver","callbackFunction","observe","disconnect","setRef","node","queryString","isMatch","setIsMatch","mqChange","mq","matches","matchMedia","offsetTop","element","accumulator","offsetParent","top","offsetLeft","left","useRect","debounce","rect","setRect","width","height","resize","prev","throttle","ResizeObserver","resizeObserver","body","cancel","upcomingOnly","contentRect","_extends","_resizeObserver$curre","onResizeObserver","x","y","useSlots","types","children","_children","flat","_types","slots","map","find","el","_children$find","props"],"mappings":"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"}